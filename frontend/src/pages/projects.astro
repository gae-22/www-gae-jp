---
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/layout/Header.astro';
import Footer from '~/components/layout/Footer.astro';
import { getEntry } from 'astro:content';

// Projects are managed via src/content/projects/projects.yaml
const projectsEntry = await getEntry('projects', 'projects');
const projects = projectsEntry?.data ?? [];
---

<Layout title="Projects | gae">
  <Header />

  <main class="min-h-screen relative overflow-hidden">
    <!-- Background accents -->
    <div class="absolute top-0 right-0 -z-10 w-2/3 h-screen bg-[radial-gradient(circle_at_top_right,var(--color-accent-indigo),transparent)] opacity-5 blur-[120px] pointer-events-none"></div>
    <div class="absolute bottom-0 left-0 -z-10 w-2/3 h-[50vh] bg-[radial-gradient(circle_at_bottom_left,var(--color-accent-teal),transparent)] opacity-5 blur-[120px] pointer-events-none"></div>

    <div class="max-w-5xl mx-auto px-4 pt-32 pb-20">
      <!-- Page header -->
      <header class="mb-10">
        <span class="text-xs font-mono font-medium text-accent-teal tracking-widest uppercase">Projects</span>
        <h1 class="text-4xl md:text-5xl font-display font-bold leading-tight mt-3 text-ink">
          My Work â€” <span class="text-transparent bg-clip-text bg-linear-to-r from-accent-indigo to-accent-teal">Selected Projects</span>
        </h1>
      </header>

      <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {projects.map(project => {
          const thumbSrc = (project.thumb as any)?.src ?? project.thumb;
          return (
            <article class="glass-card p-6 rounded-2xl flex gap-6 items-start hover:shadow-2xl transition-all duration-300">
              <a class="w-28 h-28 shrink-0 rounded-lg overflow-hidden bg-zinc-100 flex items-center justify-center border border-zinc-200" href={project.url} target="_blank" rel="noopener noreferrer">
                <img src={thumbSrc as string | undefined} alt={project.title} class="w-full h-full object-cover" />
              </a>

              <div class="flex-1">
                <div class="flex items-start justify-between gap-4">
                  <a class="text-lg md:text-xl font-bold hover:underline text-ink" href={project.url} target="_blank" rel="noopener noreferrer">{project.title}</a>
                  <span class="text-xs text-ink-muted">{(project as any).year ?? ''}</span>
                </div>

                <p class="text-sm text-ink-muted mt-2 leading-relaxed">{project.description}</p>

                <div class="flex flex-wrap gap-2 mt-4">
                  {project.tech.map(t => (
                    <span class="px-2.5 py-1 rounded-full bg-zinc-50 border border-zinc-200 text-xs font-medium text-zinc-600">{t}</span>
                  ))}
                </div>
              </div>
            </article>
          );
        })}
      </section>
    </div>
  </main>

  <Footer />
</Layout>
