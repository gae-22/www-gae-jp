---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import PostCard from '../../components/features/blog/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog', ({ data }) => {
	return import.meta.env.PROD ? !data.draft : true;
})).sort(
	(a, b) => b.data.publishedAt.valueOf() - a.data.publishedAt.valueOf()
);

const title = "ブログ | gae";
const description = "ウェブ開発とデザインに関する考察、チュートリアル、洞察。";
---

<Layout title={title} description={description}>
  <Header />

  <main class="pt-32 pb-20 px-4 min-h-screen">
    <div class="max-w-6xl mx-auto">

      <!-- Page Header -->
      <section class="mb-16 text-center animate-fade-in">
        <h1 class="text-5xl md:text-7xl font-display font-thin mb-6">
            Bl<span class="text-white/20">og</span>
        </h1>
        <p class="text-text-muted max-w-xl mx-auto text-lg">
            コード、デザイン、そしてデジタルの最前線を探求。
        </p>
      </section>

      <!-- Filter/Tags (Placeholder for now) -->
      <!-- <div class="flex gap-2 overflow-x-auto pb-8 mb-8 justify-center"> ... </div> -->

      <!-- Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-slide-up" style="animation-delay: 0.2s;">
        {posts.map((post) => (
          <PostCard post={post} />
        ))}
        {posts.length === 0 && (
            <div class="col-span-full text-center py-20 text-text-muted">
                記事が見つかりませんでした。
            </div>
        )}
      </div>

    </div>
  </main>

  <Footer />
</Layout>
