---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import PostCard from '../../components/features/blog/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog', ({ data }) => {
	return import.meta.env.PROD ? !data.draft : true;
})).sort(
	(a, b) => b.data.publishedAt.valueOf() - a.data.publishedAt.valueOf()
);

const title = "ブログ | gae";
const description = "ウェブ開発とデザインに関する考察、チュートリアル、洞察。";
---

<Layout title={title} description={description}>
  <Header />

  <main class="min-h-screen pt-32 pb-32 px-4 relative">
    <!-- Background Gradient Blob (Subtle) -->
    <div class="absolute top-0 right-0 -z-10 w-1/2 h-full bg-[radial-gradient(circle_at_center,var(--color-neon-violet),transparent)] opacity-5 blur-[120px] pointer-events-none"></div>

    <div class="max-w-6xl mx-auto">

      <!-- Page Header -->
      <section class="mb-20 text-center animate-fade-in">
        <div class="glass inline-block px-4 py-1.5 rounded-full mb-6 cursor-default">
            <span class="text-xs font-mono font-medium text-zinc-600 tracking-widest uppercase">Latest Updates</span>
        </div>
        <h1 class="text-5xl md:text-7xl font-display font-bold leading-tight text-text-main mb-6">
            Bl<span class="text-transparent bg-clip-text bg-linear-to-r from-neon-violet to-neon-cyan">og</span>
        </h1>
        <p class="text-text-muted max-w-xl mx-auto text-lg leading-relaxed">
            デジタルの最前線から、<br class="md:hidden" />
            デザインとコードの探求をお届けします。
        </p>
      </section>

      <!-- Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-slide-up" style="animation-delay: 0.2s;">
        {posts.map((post) => (
          <PostCard post={post} />
        ))}
      </div>

      {posts.length === 0 && (
          <div class="text-center py-32 glass rounded-4xl border-dashed border-2 border-zinc-200/50">
              <p class="text-text-muted font-display text-lg">記事がまだありません。</p>
          </div>
      )}

    </div>
  </main>

  <Footer />
</Layout>
